# ![alt text](https://raw.githubusercontent.com/ksalab/nodes/main/logo/0L-text.png "0L network")

## Overview

Welcome to 0L, a new Layer 1 blockchain protocol. 0L is open, permissionless, and community governed. 0L combines state of the art blockchain technology with truly decentralized governance.

This is a community-driven project with a meaningful commitment to social impact and democratic decision-making. If you are looking for a blockchain that does things differently, with priorities that reflect your values, join 0L and help us realize the transformative power of decentralized architecture. 

## Requirements

- TWO unix hosts, one for Validator Node, and one for the Private Fullnode ("VFN"). 0L code targets Ubuntu 20.4
- Recommended specs:
 - Validator: 300GB SSD harddrive, 8 core CPU, 16G RAM
 - VFN: 100G storage, 8 core CPU, 16G RAM
- Separate static IP addresses for the machines, or appropriate DNS mapping.

## Firewall

**Validator**

The following ports must be open: 6179, 6180, 3030

- 6180 should be open on all interfacess 0.0.0.0/0, it's for consensus and uses noise encryption.
- 6179 is for the private validator fullnode network ("VFN"), the firewall should only allow the IP of the fullnode to access this port.
- 3030 is for your web-monitor dashboard, so could just be your home IP if it's fixed.

**VFN**

Note: this node does not serve transactions, and does not participate in consensus, it relays data out of the validator node, and transactions into the validator.

The following ports must be open: 6178, 6179

- 6178 is for the the PUBLIC fullnode network. This is how the public nodes that will be serving JSON-RPC on the network will receive data and submit transactions to the network.
- 6179 is for the private validator fullnode network ("VFN"), it should only allow traffic from the Validator node IP address above.

## High-level steps

- Set up a host - Install binaries.
- Generate a public mining/validator key and associated mneumonic.
 - Generate and share your `account.json` file with someone who has gas and can execute the onboarding transaction for you.
- Get the latest snapshot state of the network by running `ol restore`.
- Start your node in *fullnode* mode.
 - Allow your validator in the fullnode mode to sync up with the network. Depending on how old the snapshot obtained from `ol restore` is, this may take a while (1 hr or more). To check the state of the sync run `db-backup one-shot query node-state`.
- Start the tower app which will produce and submit VDF proofs to the chain.
note if your node is not fully synced and if you have not been onboarded yet, you will see errors from the tower app until your node has caught up to the current state and you have been onboarded.
- Create VFN configs, and deploy the VFN.
 - Check and update your on-chain configuration
- Restart your node in *validator* mode. You will join in the next epoch if you have been on boarded by an active validator.
- View [ol explorer](https://0lexplorer.io/) to see the state of the network, you should see your validators public key in the list of validators.

## TMUX basics

- New session: `tmux new -s <SESSION_NAME>`
- Detach from Session: press Ctrl-b and then d
- rejoin unnamed session, if only one session exists: `tmux a`
- rejoin unnamed session by id: `tmux ls` to get the ID and then `tmux a -t <SESSION_ID>`
- rejoin named session: `tmux attach -t <SESSION_NAME>`
- kill session: attach to the session --> press Ctrl-b, then type `:kill-session` and press ENTER

## 1. Set up a host

These instructions target Ubuntu.

1.1. Set up an Ubuntu host with `ssh` access, e.g. in a cloud service provider.

1.2. Associate a static IP with your host, this will be tied to you account. This address will be shared on the chain, so that other nodes will be able to find you through the peer discovery mechanism.

1.3. 0L binaries should be run in a linux user that has very narrow permissions. Before you can create binaries you'll need some tools installed probably by `sudo` and likely in root. A helpful script to install dependencies exists [here](github.com/OLSF/libra/main/ol/util/setup.sh).

You can run it with a curl bash:

```bash
curl -sL https://raw.githubusercontent.com/OLSF/libra/main/ol/util/setup.sh | bash
```

1.4. Use `tmux` to persist the terminal session for build, as well as for running the nodes and tower app. Also this setup requires `git` and `make`, which might be installed already on your host. If not, perform the following steps now:

```bash
sudo apt install -y git vim zip unzip jq build-essential cmake clang llvm libgmp-dev secure-delete pkg-config libssl-dev lld
```

1.5. Create the linux user that will run the 0L services.

We will create a user called `node` which has no password (can only be accessed initially by sudo).

```bash
sudo useradd node -m -s /bin/bash
```

You can then access that account via `sudo su node`. Or setup ssh keys under `/home/node/.ssh/authorized_keys`.

1.6. Install Rust on the node user

```bash
sudo su node

# you are now in the node user
curl https://sh.rustup.rs -sSf | sh -s -- --default-toolchain stable -y

# restart your bash instance to pickup the cargo paths
. ~/.bashrc

# install some command-line tools
cargo install toml-cli
```

